{"ast":null,"code":"import _toConsumableArray from\"C:/Users/kriti/Desktop/web_chat_app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/kriti/Desktop/web_chat_app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createContext,useState,useRef,useEffect}from'react';import{io}from'socket.io-client';import Peer from'simple-peer';import{jsx as _jsx}from\"react/jsx-runtime\";var SocketContext=/*#__PURE__*/createContext();var socket=io('https://my-video-chat-application.herokuapp.com');var username=prompt(\"what is your username\");var ContextProvider=function ContextProvider(_ref){var children=_ref.children;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),stream=_useState2[0],setStream=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),me=_useState4[0],setMe=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),call=_useState6[0],setCall=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),callAccepted=_useState8[0],setCallAccepted=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),callEnded=_useState10[0],setCallEnded=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),name=_useState12[0],setName=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),users=_useState14[0],setUsers=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),message=_useState16[0],setMessage=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),messages=_useState18[0],setMessages=_useState18[1];var myVideo=useRef();var userVideo=useRef();var connectionRef=useRef();useEffect(function(){navigator.mediaDevices.getUserMedia({video:true,audio:true}).then(function(currentStream){setStream(currentStream);myVideo.current.srcObject=currentStream;});socket.on('me',function(id){return setMe(id);});socket.on('calluser',function(_ref2){var from=_ref2.from,callerName=_ref2.name,signal=_ref2.signal;setCall({isReceivingCall:true,from:from,name:callerName,signal:signal});});socket.on(\"connect\",function(){socket.emit(\"username\",username);});socket.on(\"users\",function(users){setUsers(users);});socket.on(\"message\",function(message){setMessages(function(messages){return[].concat(_toConsumableArray(messages),[message]);});});socket.on(\"connected\",function(user){setUsers(function(users){return[].concat(_toConsumableArray(users),[user]);});});socket.on(\"disconnected\",function(id){setUsers(function(users){return users.filter(function(user){return user.id!==id;});});});},[]);//Make_a_call\nvar callUser=function callUser(id){var peer=new Peer({initiator:true,trickle:false,stream:stream});peer.on('signal',function(data){socket.emit('calluser',{userToCall:id,signalData:data,from:me,name:name});});peer.on('stream',function(currentStream){userVideo.current.srcObject=currentStream;});socket.on('callaccepted',function(signal){setCallAccepted(true);peer.signal(signal);});connectionRef.current=peer;};//Answer_call\nvar answerCall=function answerCall(){setCallAccepted(true);var peer=new Peer({initiator:false,trickle:false,stream:stream});peer.on('signal',function(data){socket.emit('answercall',{signal:data,to:call.from});});peer.on('stream',function(currentStream){userVideo.current.srcObject=currentStream;});peer.signal(call.signal);connectionRef.current=peer;};//Exit_call   \nvar leaveCall=function leaveCall(){setCallEnded(true);connectionRef.current.destroy();};//Video_toggle   \nvar muteUnmuteV=function muteUnmuteV(){var enabled=stream.getVideoTracks()[0].enabled;if(enabled){myVideo.current.srcObject.getVideoTracks()[0].enabled=false;}else{myVideo.current.srcObject.getVideoTracks()[0].enabled=true;}};//Audio_toggle\nvar muteUnmuteA=function muteUnmuteA(){var enabled=stream.getAudioTracks()[0].enabled;if(enabled){myVideo.current.srcObject.getAudioTracks()[0].enabled=false;}else{myVideo.current.srcObject.getAudioTracks()[0].enabled=true;}};//Share_screen\nvar shareScreen=function shareScreen(){navigator.mediaDevices.getDisplayMedia({video:{cursor:\"always\"},audio:{echoCancellation:true,noiseSuppression:true,sampleRate:44100}}).then(function(screenStream){setStream(screenStream);connectionRef.current.replaceTrack(stream.getVideoTracks()[0],screenStream.getVideoTracks()[0],stream);myVideo.current.srcObject=screenStream;screenStream.getTracks()[0].onended=function(){connectionRef.current.replaceTrack(screenStream.getVideoTracks()[0],stream.getVideoTracks()[0],stream);myVideo.current.srcObject=stream;};});};//Messenger\nvar submit=function submit(event){event.preventDefault();socket.emit(\"send\",message);setMessage(\"\");};return/*#__PURE__*/_jsx(SocketContext.Provider,{value:{call:call,callAccepted:callAccepted,myVideo:myVideo,userVideo:userVideo,stream:stream,name:name,setName:setName,callEnded:callEnded,me:me,callUser:callUser,leaveCall:leaveCall,answerCall:answerCall,muteUnmuteV:muteUnmuteV,muteUnmuteA:muteUnmuteA,users:users,message:message,messages:messages,submit:submit,setMessage:setMessage,shareScreen:shareScreen},children:children});};export{ContextProvider,SocketContext};","map":{"version":3,"sources":["C:/Users/kriti/Desktop/web_chat_app/client/src/SocketContext.js"],"names":["React","createContext","useState","useRef","useEffect","io","Peer","SocketContext","socket","username","prompt","ContextProvider","children","stream","setStream","me","setMe","call","setCall","callAccepted","setCallAccepted","callEnded","setCallEnded","name","setName","users","setUsers","message","setMessage","messages","setMessages","myVideo","userVideo","connectionRef","navigator","mediaDevices","getUserMedia","video","audio","then","currentStream","current","srcObject","on","id","from","callerName","signal","isReceivingCall","emit","user","filter","callUser","peer","initiator","trickle","data","userToCall","signalData","answerCall","to","leaveCall","destroy","muteUnmuteV","enabled","getVideoTracks","muteUnmuteA","getAudioTracks","shareScreen","getDisplayMedia","cursor","echoCancellation","noiseSuppression","sampleRate","screenStream","replaceTrack","getTracks","onended","submit","event","preventDefault"],"mappings":"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","sourcesContent":["import React, { createContext ,useState , useRef, useEffect} from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport Peer from 'simple-peer';\r\n\r\nconst SocketContext = createContext();\r\n\r\nconst socket = io('https://my-video-chat-application.herokuapp.com');\r\n\r\nconst username = prompt(\"what is your username\");\r\n\r\nconst ContextProvider =({ children })=> {\r\n    const [stream, setStream] = useState(null);\r\n    const [me, setMe] = useState('');\r\n    const [call,setCall] = useState({});\r\n    const [callAccepted, setCallAccepted] = useState(false);\r\n    const [callEnded, setCallEnded] = useState(false);\r\n    const [name, setName] = useState('');\r\n    const [users, setUsers] = useState([]);\r\n    const [message, setMessage] = useState(\"\");\r\n    const [messages, setMessages] = useState([]);\r\n    \r\n    const myVideo = useRef();\r\n    const userVideo = useRef();\r\n    const connectionRef = useRef();\r\n\r\n    useEffect(() => {\r\n        navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n        .then((currentStream) => {\r\n            setStream(currentStream);\r\n            myVideo.current.srcObject = currentStream;\r\n        });\r\n\r\n        socket.on('me', (id) => setMe(id));\r\n\r\n        socket.on('calluser', ({ from, name: callerName, signal }) => {\r\n            setCall({ isReceivingCall: true, from, name: callerName, signal })\r\n        });\r\n\r\n        socket.on(\"connect\", () => {\r\n            socket.emit(\"username\", username);\r\n        });\r\n      \r\n        socket.on(\"users\", users => {\r\n            setUsers(users);\r\n        });\r\n      \r\n        socket.on(\"message\", message => {\r\n            setMessages(messages => [...messages, message]);\r\n        });\r\n      \r\n        socket.on(\"connected\", user => {\r\n            setUsers(users => [...users, user]);\r\n        });\r\n      \r\n        socket.on(\"disconnected\", id => {\r\n            setUsers(users => {\r\n              return users.filter(user => user.id !== id);\r\n            });\r\n        });\r\n    }, []);\r\n\r\n//Make_a_call\r\n    const callUser = (id) => {\r\n        const peer = new Peer({ initiator: true, trickle: false, stream });\r\n        \r\n        peer.on('signal', (data) => {\r\n            socket.emit('calluser', { userToCall: id, signalData: data, from: me, name });\r\n        });\r\n\r\n        peer.on('stream', (currentStream) => {\r\n            userVideo.current.srcObject = currentStream;\r\n        });\r\n\r\n        socket.on('callaccepted',(signal) => {\r\n            setCallAccepted(true);\r\n\r\n            peer.signal(signal);\r\n        });\r\n\r\n        connectionRef.current = peer;\r\n    }\r\n\r\n//Answer_call\r\n    const answerCall = () =>{\r\n    setCallAccepted(true)\r\n\r\n    const peer = new Peer({ initiator: false, trickle: false, stream });\r\n\r\n    peer.on('signal', (data) => {\r\n        socket.emit('answercall', { signal: data, to: call.from });\r\n    });\r\n\r\n    peer.on('stream', (currentStream) => {\r\n        userVideo.current.srcObject = currentStream;\r\n    });\r\n\r\n    peer.signal(call.signal);\r\n\r\n    connectionRef.current = peer;\r\n    }\r\n\r\n//Exit_call   \r\n    const leaveCall = () =>{\r\n        setCallEnded(true);\r\n        connectionRef.current.destroy();\r\n    }\r\n\r\n//Video_toggle   \r\n    const muteUnmuteV = () => { \r\n        const enabled = stream.getVideoTracks()[0].enabled;\r\n        if (enabled) {\r\n            myVideo.current.srcObject.getVideoTracks()[0].enabled = false;\r\n        } \r\n        else {\r\n            myVideo.current.srcObject.getVideoTracks()[0].enabled = true;\r\n        }\r\n    }\r\n    \r\n//Audio_toggle\r\n    const muteUnmuteA = () => { \r\n        const enabled = stream.getAudioTracks()[0].enabled;\r\n        if (enabled) {\r\n            myVideo.current.srcObject.getAudioTracks()[0].enabled = false;\r\n        } \r\n        else {\r\n            myVideo.current.srcObject.getAudioTracks()[0].enabled = true;\r\n        }\r\n    }\r\n\r\n//Share_screen\r\n    const  shareScreen=() =>{\r\n        navigator.mediaDevices.getDisplayMedia( {\r\n            video: {\r\n                cursor: \"always\"\r\n            },\r\n            audio: {\r\n                echoCancellation: true,\r\n                noiseSuppression: true,\r\n                sampleRate: 44100\r\n            }\r\n        } )\r\n        .then((screenStream) => {\r\n            setStream(screenStream);\r\n            connectionRef.current.replaceTrack(stream.getVideoTracks()[0],screenStream.getVideoTracks()[0],stream);\r\n            myVideo.current.srcObject = screenStream;\r\n\r\n            screenStream.getTracks()[0].onended = () =>{\r\n                connectionRef.current.replaceTrack(screenStream.getVideoTracks()[0],stream.getVideoTracks()[0],stream);\r\n                myVideo.current.srcObject=stream;\r\n            }\r\n        })\r\n    }\r\n\r\n//Messenger\r\n    const submit = event => {\r\n        event.preventDefault();\r\n        socket.emit(\"send\", message);\r\n        setMessage(\"\");\r\n    }\r\n        \r\n    \r\n        \r\n    return(\r\n        <SocketContext.Provider value={{call,callAccepted,myVideo,userVideo,stream,name,setName,callEnded,me,callUser,leaveCall,answerCall,muteUnmuteV,muteUnmuteA,users,message,messages,submit,setMessage,shareScreen}}>\r\n            {children}\r\n        </SocketContext.Provider>\r\n    );\r\n}\r\n\r\nexport { ContextProvider, SocketContext };"]},"metadata":{},"sourceType":"module"}