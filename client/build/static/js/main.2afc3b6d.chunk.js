(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{135:function(e,t){},137:function(e,t){},153:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(9),i=n.n(c),r=n(19),s=n(196),o=n(191),l=n(186),d=n(189),j=n(157),u=n(198),b=n(58),m=n(13),O=n(87),x=n(57),p=n.n(x),f=n(2),h=Object(a.createContext)(),g=Object(O.io)("https://my-video-chat-application.herokuapp.com"),v=prompt("what is your username"),C=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(m.a)(n,2),i=c[0],r=c[1],s=Object(a.useState)(""),o=Object(m.a)(s,2),l=o[0],d=o[1],j=Object(a.useState)({}),u=Object(m.a)(j,2),O=u[0],x=u[1],C=Object(a.useState)(!1),y=Object(m.a)(C,2),k=y[0],N=y[1],w=Object(a.useState)(!1),S=Object(m.a)(w,2),T=S[0],D=S[1],V=Object(a.useState)(""),A=Object(m.a)(V,2),I=A[0],U=A[1],B=Object(a.useState)([]),R=Object(m.a)(B,2),E=R[0],M=R[1],F=Object(a.useState)(""),W=Object(m.a)(F,2),z=W[0],P=W[1],J=Object(a.useState)([]),Y=Object(m.a)(J,2),q=Y[0],G=Y[1],H=Object(a.useRef)(),K=Object(a.useRef)(),L=Object(a.useRef)();Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){r(e),H.current.srcObject=e})),g.on("me",(function(e){return d(e)})),g.on("calluser",(function(e){var t=e.from,n=e.name,a=e.signal;x({isReceivingCall:!0,from:t,name:n,signal:a})})),g.on("connect",(function(){g.emit("username",v)})),g.on("users",(function(e){M(e)})),g.on("message",(function(e){G((function(t){return[].concat(Object(b.a)(t),[e])}))})),g.on("connected",(function(e){M((function(t){return[].concat(Object(b.a)(t),[e])}))})),g.on("disconnected",(function(e){M((function(t){return t.filter((function(t){return t.id!==e}))}))}))}),[]);return Object(f.jsx)(h.Provider,{value:{call:O,callAccepted:k,myVideo:H,userVideo:K,stream:i,name:I,setName:U,callEnded:T,me:l,callUser:function(e){var t=new p.a({initiator:!0,trickle:!1,stream:i});t.on("signal",(function(t){g.emit("calluser",{userToCall:e,signalData:t,from:l,name:I})})),t.on("stream",(function(e){K.current.srcObject=e})),g.on("callaccepted",(function(e){N(!0),t.signal(e)})),L.current=t},leaveCall:function(){D(!0),L.current.destroy()},answerCall:function(){N(!0);var e=new p.a({initiator:!1,trickle:!1,stream:i});e.on("signal",(function(e){g.emit("answercall",{signal:e,to:O.from})})),e.on("stream",(function(e){K.current.srcObject=e})),e.signal(O.signal),L.current=e},muteUnmuteV:function(){var e=i.getVideoTracks()[0].enabled;H.current.srcObject.getVideoTracks()[0].enabled=!e},muteUnmuteA:function(){var e=i.getAudioTracks()[0].enabled;H.current.srcObject.getAudioTracks()[0].enabled=!e},users:E,message:z,messages:q,submit:function(e){e.preventDefault(),g.emit("send",z),P("")},setMessage:P,shareScreen:function(){navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}}).then((function(e){r(e),L.current.replaceTrack(i.getVideoTracks()[0],e.getVideoTracks()[0],i),H.current.srcObject=e,e.getTracks()[0].onended=function(){L.current.replaceTrack(e.getVideoTracks()[0],i.getVideoTracks()[0],i),H.current.srcObject=i}}))}},children:t})},y=Object(l.a)((function(e){return{video:Object(r.a)({justifyContent:"center",width:"550px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(r.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{justifyContent:"center",padding:"10px",border:"5px solid black",margin:"10px"}}})),k=function(){var e=Object(a.useContext)(h),t=e.name,n=e.callAccepted,c=e.myVideo,i=e.userVideo,r=e.callEnded,s=e.stream,l=e.call,b=e.muteUnmuteV,m=e.muteUnmuteA,O=e.shareScreen,x=y();return Object(f.jsxs)(d.a,{container:!0,className:x.gridContainer,children:[s&&Object(f.jsxs)(j.a,{className:x.paper,children:[Object(f.jsxs)(d.a,{item:!0,xs:12,md:6,children:[Object(f.jsx)(o.a,{variant:"h4",gutterBottom:!0,children:t||"Name"}),Object(f.jsx)("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:x.video})]}),Object(f.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(f.jsx)(u.a,{variant:"contained",color:"secondary",onClick:b,className:x.margin,children:"Video ON/OFF"}),Object(f.jsx)(u.a,{variant:"contained",color:"secondary",onClick:m,className:x.margin,children:"Audio ON/OFF"}),Object(f.jsx)(u.a,{variant:"contained",color:"secondary",onClick:O,className:x.margin,children:"Screen Share"})]})]}),n&&!r&&Object(f.jsx)(j.a,{className:x.paper,children:Object(f.jsxs)(d.a,{item:!0,xs:12,md:6,children:[Object(f.jsx)(o.a,{variant:"h4",gutterBottom:!0,children:l.name||"Name"}),Object(f.jsx)("video",{playsInline:!0,ref:i,autoPlay:!0,className:x.video})]})})]})},N=function(){var e=Object(a.useContext)(h),t=e.answerCall,n=e.call,c=e.callAccepted;return Object(f.jsx)(f.Fragment,{children:n.isReceivingCall&&!c&&Object(f.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(f.jsxs)("h1",{children:[n.name," is calling:"]}),Object(f.jsx)(u.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"})]})})},w=n(192),S=n(197),T=n(93),D=n(193),V=n(194),A=n(195),I=Object(l.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(r.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(r.a)({width:"600px",margin:"5px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"5px solid black"}}})),U=function(e){var t=e.children,n=Object(a.useContext)(h),c=n.me,i=n.callAccepted,r=n.name,s=n.setName,l=n.callEnded,b=n.leaveCall,O=n.callUser,x=Object(a.useState)(""),p=Object(m.a)(x,2),g=p[0],v=p[1],C=I();return Object(f.jsx)(w.a,{className:C.container,children:Object(f.jsxs)(j.a,{elevation:10,className:C.paper,children:[Object(f.jsx)("form",{className:C.root,noValidate:!0,autoComplete:"off",children:Object(f.jsxs)(d.a,{container:!0,className:C.gridContainer,children:[Object(f.jsxs)(d.a,{item:!0,xs:12,md:6,className:C.padding,children:[Object(f.jsx)(o.a,{gutterBottom:!0,variant:"h4",children:"Your name"}),Object(f.jsx)(S.a,{label:"Name",value:r,onChange:function(e){return s(e.target.value)},fullWidth:!0}),Object(f.jsx)(T.CopyToClipboard,{text:c,className:C.margin,children:Object(f.jsx)(u.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(f.jsx)(D.a,{fontSize:"large"}),children:"Copy Your ID"})})]}),Object(f.jsxs)(d.a,{item:!0,xs:12,md:6,className:C.padding,children:[Object(f.jsx)(o.a,{gutterBottom:!0,variant:"h4",children:"Make a call"}),Object(f.jsx)(S.a,{label:"ID to call",value:g,onChange:function(e){return v(e.target.value)},fullWidth:!0}),i&&!l?Object(f.jsx)(u.a,{variant:"contained",color:"secondary",startIcon:Object(f.jsx)(V.a,{fontSize:"large"}),fullWidth:!0,onClick:b,className:C.margin,children:"Exit call"}):Object(f.jsx)(u.a,{variant:"contained",color:"primary",startIcon:Object(f.jsx)(A.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return O(g)},className:C.margin,children:"Dial"})]})]})}),t]})})},B=(n(152),n(153),n(94)),R=n.n(B),E=Object(l.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(r.a)({justifyContent:"center",width:"100%"},e.breakpoints.down("xs"),{flexDirection:"row"}),container:Object(r.a)({justifyContent:"center",width:"600px",margin:"0px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:0},paper:{justifyContent:"center",padding:"0px 0px",border:"4px solid black"}}})),M=function(){var e=Object(a.useContext)(h),t=e.users,n=e.message,c=e.messages,i=e.submit,r=e.setMessage,s=E();return Object(f.jsxs)(w.a,{className:s.container,children:[Object(f.jsx)(j.a,{elevation:10,className:s.paper,children:Object(f.jsxs)(d.a,{container:!0,className:s.gridContainer,children:[Object(f.jsx)(o.a,{variant:"h4",children:"Messenger"}),Object(f.jsx)("div",{id:"messages",class:"overflow-auto",children:c.map((function(e,t){var n=e.user,a=e.date,c=e.text;return Object(f.jsxs)("div",{class:"row",children:[Object(f.jsx)("div",{class:"left",children:Object(f.jsx)("h7",{children:Object(f.jsx)("b",{children:n.name})})}),Object(f.jsx)("div",{class:"middle",children:Object(f.jsx)("i",{children:R()(a).format("h:mma")})}),Object(f.jsx)("div",{class:"right",children:c})]},t)}))}),Object(f.jsx)("form",{onSubmit:i,id:"form",children:Object(f.jsxs)("div",{className:"input-group",children:[Object(f.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return r(e.currentTarget.value)},value:n,id:"text"}),Object(f.jsx)("span",{className:"input-group-btn",children:Object(f.jsx)(u.a,{variant:"contained",color:"secondary",id:"submit",type:"submit",onClick:i,className:s.margin,children:"Send"})})]})})]})}),Object(f.jsx)(j.a,{elevation:10,className:s.paper,children:Object(f.jsxs)("div",{align:"left",className:"col-md-4",children:[Object(f.jsx)("h5",{children:"Users Online"}),Object(f.jsx)("ul",{id:"users",children:t.map((function(e){var t=e.name,n=e.id;return Object(f.jsx)("li",{children:t},n)}))})]})})]})},F=Object(l.a)((function(e){return{appBar:Object(r.a)({borderRadius:20,margin:"5px 100px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"600px",border:"5px solid black"},e.breakpoints.down("xs"),{width:"90%"}),wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),W=function(){var e=F();return Object(f.jsxs)("div",{className:e.wrapper,children:[Object(f.jsx)(s.a,{className:e.appBar,position:"static",color:"inherit",children:Object(f.jsx)(o.a,{variant:"h2",align:"center",children:"Video Chatting"})}),Object(f.jsx)(k,{}),Object(f.jsx)(U,{children:Object(f.jsx)(N,{})}),Object(f.jsx)(M,{})]})};n(155);i.a.render(Object(f.jsx)(C,{children:Object(f.jsx)(W,{})}),document.getElementById("root"))}},[[156,1,2]]]);
//# sourceMappingURL=main.2afc3b6d.chunk.js.map